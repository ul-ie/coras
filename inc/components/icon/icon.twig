{#
/**
 * @file
 * Icon component.
 * 
 * @see https://coras.ul.ie/components/icon/#properties for full documentation.
 */
#}
{% set icons = json_decode(get_file('./data/icons.json')) %}
{% set icon_fill = icon_fill ?? '' %}
{% set icon_name = icon_name ?? '' %}
{% set icon_type = icon_type in ['brands', 'duotone', 'regular', 'solid'] ? icon_type : 'solid' %}
{% set icon_size = icon_size ?? 'w-4' %}

{% set icon_classes = [
  icon_fill,
  icon_size,
  icon_modifiers
]|join(' ') %}

{% set search_terms = [
  icon_type,
  icon_name,
  icons[icon_name].search.terms
]|join(',')%}

{% if icon_type in icons[icon_name].styles %}
  <svg
    title="{{ icon_name }}"
    class="{{ icon_classes }}"
    xmlns="http://www.w3.org/2000/svg"
    viewBox="{{ icons[icon_name].svg[icon_type].viewBox|join(' ') }}"
    data-tags="{{ search_terms }}"
    >
    {% if icon_type == 'duotone' %}
      <path opacity=".4" d="{{ icons[icon_name].svg[icon_type].path[0] }}"/>
      <path d="{{ icons[icon_name].svg[icon_type].path[1] }}"/>
    {% else %}
      <path d="{{ icons[icon_name].svg[icon_type].path }}"/>
    {% endif %}
  </svg>
{% else %}
  <small class="text-xs mx-1">Invalid icon</small>
{% endif %}
